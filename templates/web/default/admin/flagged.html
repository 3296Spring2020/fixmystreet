[% INCLUDE 'admin/header.html' title=loc('Flagged reports and users') %]
[% PROCESS 'admin/report_blocks.html' %]

<p class="fms-admin-info">
  [% loc("You can flag any report or user by editing them, and they will be listed on this page.
          For example, this can useful if you want to keep an eye on a user who has posted inappropriate
          reports in the past.") %]
  <br>
  [% loc("Reports made by flagged users are never sent through to bodies, but are automatically hidden instead.") %]
</p>

<h2>[% loc( 'Problems' ) %]</h2>
[% IF problems.size > 0 %]
<table cellspacing="0" cellpadding="2" border="1">
    <tr>
        <th>[% loc('ID') %]</th>
        <th>[% loc('Title') %]</th>
        <th>[% loc('Name') %]</th>
        <th>[% loc('Body') %]</th>
        <th>[% loc('State') %]</th>
        <th>*</th>
    </tr>
    [% INCLUDE 'admin/problem_row.html' %]
</table>
[% ELSE %]
<p>
[% loc('No flagged problems found') %]
</p>
[% END %]

<h2>[% loc( 'Users' ) %]</h2>
[% IF users.count > 0 %]
<table cellspacing="0" cellpadding="2" border="1">
    <tr>
        <th>[% loc('Name') %]</th>
        <th>[% loc('Email') %]</th>
    </tr>
[% WHILE ( user = users.next ) -%]
    <tr>
        <td>[% user.name | html %]</td>
        <td>[% user.email | html %]</td>
        <td><a href="[% c.uri_for( 'reports', search => user.email ) %]">list content</a></td>
    </tr>
[%- END %]
</table>
[%- ELSE %]
<p>
[% loc('No flagged users found') %]
</p>
[%- END %]

[% INCLUDE 'admin/footer.html' %]
