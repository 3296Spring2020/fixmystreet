[% BLOCK value_or_nbsp -%]
    [%- IF value %][% value | html %][% ELSE %]&nbsp;[% END %]
[%- END %]

[% BLOCK format_time -%]
    [%- IF time %][% time.ymd %]&nbsp;[% time.hms %][% ELSE %][% no_time || '&nbsp;' %][% END %][% no_time = '' %]
[%- END %]

[% BLOCK abuse_button -%]
[% IF allowed_pages.abuse_edit -%]
[% IF email_in_abuse %]<small>[% loc('(Email in abuse table)') %]</small>[% ELSE %]<input type="submit" name="banuser" value="[% loc('Ban email address') %]" />[% END %]
[%- END %]
[%- END %]

[% BLOCK flag_button -%]
[% IF user.flagged || user_flagged %]<input type="submit" name="removeuserflag" value="[% loc('Remove flag') %]">[% ELSE %]<input type="submit" name="flaguser" value="[% loc('Flag user') %]" />[% END %]
[%- END %]

[%- USE date_format = DateTime::Format('DateTime::Format::Strptime', { pattern => "%d/%m/%Y" }) %]

[% BLOCK format_date -%]
    [%- IF this_date %]
      [% date_format.format(this_date) %]
    [% ELSE %][% no_time || '&nbsp;' %][% END %][% no_time = '' %]
[%- END %]
