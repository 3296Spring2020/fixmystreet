[% BLOCK value_or_nbsp -%]
    [%- IF value %][% value | html %][% ELSE %]&nbsp;[% END %]
[%- END %]

[% BLOCK format_time -%]
    [%- IF time %][% time.ymd %]&nbsp;[% time.hms %][% ELSE %][% no_time || '&nbsp;' %][% END %][% no_time = '' %]
[%- END %]

[% BLOCK abuse_button -%]
[% IF allowed_pages.abuse_edit -%]
[% IF email_in_abuse %]<small>[% loc('(Email in abuse table)') %]</small>[% ELSE %]<input type="submit" name="banuser" value="[% loc('Ban email address') %]" />[% END %]
[%- END %]
[%- END %]

[% BLOCK flag_button -%]
[% IF user.flagged || user_flagged %]<input type="submit" name="removeuserflag" value="[% loc('Remove flag') %]">[% ELSE %]<input type="submit" name="flaguser" value="[% loc('Flag user') %]" />[% END %]
[%- END %]

[%# note: date format here (i.e., dd.mm.YYYY) currently used by Zurich %]
[% BLOCK format_date -%]
    [%- IF this_date %]
      [% this_date.strftime('%d.%m.%Y') %]
    [% ELSE %][% no_time || '&nbsp;' %][% END %][% no_time = '' %]
[%- END %]

[% BLOCK sort_link %][% IF order == choice %][% c.uri_with( d => 1 - (c.req.params.d||0) ) %][% ELSE %][% c.uri_with( { o => choice } ) %][% END %][% END %]
