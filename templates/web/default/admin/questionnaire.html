[% INCLUDE 'admin/header.html' title=loc('Survey Results') %]

<table border="1">
    <tr>
        <th>[% loc('Reported before') %]</th>
        <th>[% loc('Not reported before') %]</th>
    </tr>
    [% IF questionnaires.total > 0 %]
    <tr>
        <td>[% questionnaires.1 %] ([% 100 * questionnaires.1 / questionnaires.total | format('%.1f') %]%)</td>
        <td>[% questionnaires.0 %] ([% 100 * questionnaires.0 / questionnaires.total | format('%.1f') %]%)</td>
    </tr>
    [% ELSE %]
    <tr>
        <td>[% loc('n/a') %]</td>
        <td>[% loc('n/a') %]</td>
    </tr>
    [% END %]
</table>

<h2>[% loc('Problem state change based on survey results') %]</h2>

<table cellspacing="0" cellpadding="2" border="1">
    <tr>
        <th>[% loc('Old state') %]</th>
        <th>[% loc('New state') %]</th>
        <th>[% loc('Total') %]</th>
    </tr>
[% state_count = 0 %]
[% WHILE ( s = state_changes.next ) %]
[% state_count = state_count + 1 %]
    <tr>
        <td>[% s.old_state %]</td>
        <td>[% s.new_state %]</td>
        <td>[% s.get_column('c') %] ([% 100 * s.get_column('c') / state_changes_count | format('%.1f') %]%)</td>
    </tr>
[% END %]
[% IF state_count == 0 %]
    <tr>
        <td colspan="3" class="nomatch">[% loc('No state changes found') %]</td>
    </tr>
[% END %]
</table>

[% INCLUDE 'admin/footer.html' %]
