[% INCLUDE 'header.html', title = loc('Sign in or create an account') %]

<h1>[% loc('Sign in or create an account') %]</h1>

<form action="[% c.uri_for() %]" method="post" name="general_auth">
<input type="hidden" name="r" value="[% c.req.params.r | html %]">
    
    [% IF email_error;

        # other keys include fqdn, mxcheck if you'd like to write a custom error message

        errors = {
            missing => loc('Please enter your email'),
            other   => loc('Please check your email address is correct')
        };
        
        loc_email_error = errors.$email_error || errors.other;
    END %]
    
    
    <div id="fieldset">

        [% IF loc_email_error  %]
            <div class="form-error">[% loc_email_error %]</div>
        [% ELSIF login_error %]
            <div class="form-error">Email or password wrong - please try again.</div>
        [% END %]

        <div class="form-field">
        <label for="email">[% loc('Email:') %]</label>
        <input type="text" name="email" value="[% email || '' | html %]">
        </div>

        <div class="form-field">
        <label for="password">[% loc('Password:') %]</label>
        <input type="password" name="password" value="">
        </div>

        <div class="checkbox">
        <input type="checkbox" name="remember_me" value='1'[% ' checked' IF remember_me %]>
        <label for="remember_me">
        [% loc('Remember me - do not use on a public computer') %]
        </label>
        </div>
        
        <div class="checkbox">
        <input type="submit" name="login" value="[% loc('Sign me in') %]">
        </div>

        <h3>I don't have an account, or I've forgotten my password...</h3>
        <div class="checkbox">
        <input type="submit" name="email_login" value="[% loc('Email the details I need to the address I entered above') %]">
        </div>

    </div>
    
</form>


[% INCLUDE 'footer.html' %]
