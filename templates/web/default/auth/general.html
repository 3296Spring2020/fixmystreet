[% INCLUDE 'header.html', title => loc('Login or create an account') %]

<h1>[% loc('Login or create an account') %]</h1>


<form action="[% c.uri_for() %]" method="post" name="general_auth">
    
    [% IF email_error;

        # other keys include fqdn, mxcheck if you'd like to write a custom error message

        errors = {
            missing => loc('Please enter an email address'),
            other   => loc('Please check your email address is correct')
        };
        
        loc_email_error = errors.$email_error || errors.other;
    END %]
    
    
    <div>

        [% IF loc_email_error  %]
            <span class="error">[% loc_email_error %]</span><br>
        [% ELSIF login_error %]
            <span class="error">Email or password wrong - please try again.</span><br>
        [% END %]

        <label for="email">[% loc('Email:') %]</label>
        <input type="text" name="email" value="[% email || '' | html %]">
        <br>

        <label for="password">[% loc('Password:') %]</label>
        <input type="password" name="password" value="">
        <br>
        <!-- FIXME - implement session length choosing
        <label for="remember_me">&nbsp;</label>
        <input type="checkbox" name="remember_me">
        Remember me - do not use on a public computer
        <br> -->
        <label for="login">&nbsp;</label>
        <input type="submit" name="login" value="[% loc('Log me in') %]">

        <h3>I don't have an account, or I've forgotten my password...</h3>
        <label for="email_login">&nbsp;</label>
        <input type="submit" name="email_login" value="[% loc('Email the details I need to the address I entered above') %]">
    </div>
    
</form>


[% INCLUDE 'footer.html' %]
